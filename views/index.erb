<div id="application" data-user="<%= session[:user] %>"></div>
<script type="text/x-handlebars">
  <div class="info-bar">
    <div class="wrap">
      {{#if userLoggedIn}}
        {{partial "newswap"}}
      {{else}}
        {{partial "signin"}}
      {{/if}}
    </div>
  </div>
  <div>
    <div class="wrap">
      {{partial "filter"}}
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" data-template-name="_filter">
  <div class="info-mini">
    <div id="filter-form">
      {{ input type="text" value=filterText placeholder="Ember.js" }}
      <p>Filter the swaps</p>
    </form>
  </div>
</script>

<script type="text/x-handlebars" id="swaps">
  {{#each controller.filtered}}
    <div class="swap">
      <p class="blurb"><a href="http://twitter.com/{{user}}" class="twitter">{{user}}</a> is looking for help with <strong>{{skill_needed}}</strong>.</p>
      <p class="blurb">In return, they can offer their help with <strong>{{skill_offered}}</strong>.</p>
      <a class="btn btn-dark" href="https://twitter.com/intent/tweet?text={{user}}, I can help you with {{skill_needed}} (via SkillSwap).">Offer your help.</a>
    </div>
  {{/each}}
</script>

<script type="text/x-handlebars" data-template-name='_newswap'>
  <form {{action "newswap" on="submit"}}>
    <p class="blurb text-light">I am looking for someone to help me with: {{input type="text" value=skill_needed placeholder="Ember.js" }}</p>
    <p class="blurb text-light">In return I can offer help with: {{input type="text" value=skill_offered placeholder="Ruby on Rails" }}</p>
    <input class="btn btn-light" type="submit" value="Save" />
  </form>
</script>

<script type="text/x-handlebars" data-template-name='_signin'>
  <div class="intro">
    <h2>Find people to swap skills with&hellip;</h2>
    <a class="btn btn-light" href="/auth/twitter">Sign in with Twitter</a>
    <p class="meta text-light">The app is <em>read only</em>, we'll never tweet from your account or alter anything.</p>
  </div>
</script>
